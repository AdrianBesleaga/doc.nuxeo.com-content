---
title: Creating Nuxeo Packages
labels:
    - marketplace
    - packaging-component
toc: true
confluence:
    ajs-parent-page-id: '16089349'
    ajs-parent-page-title: Marketplace Add-Ons
    ajs-space-key: NXDOC
    ajs-space-name: Nuxeo Platform Developer Documentation
    canonical: Creating+Nuxeo+Packages
    canonical_source: 'https://doc.nuxeo.com/display/NXDOC/Creating+Nuxeo+Packages'
    page_id: '3342859'
    shortlink: CwIz
    shortlink_source: 'https://doc.nuxeo.com/x/CwIz'
    source_link: /display/NXDOC/Creating+Nuxeo+Packages
history:
    - 
        author: Arnaud Kervern
        date: '2016-08-16 09:45'
        message: ''
        version: '54'
    - 
        author: Manon Lumeau
        date: '2016-06-09 13:54'
        message: ''
        version: '53'
    - 
        author: Alain Escaffre
        date: '2016-03-23 15:53'
        message: ''
        version: '52'
    - 
        author: Julien Carsique
        date: '2016-01-15 10:26'
        message: ''
        version: '51'
    - 
        author: Ronan Daniellou
        date: '2016-01-15 10:13'
        message: Typo 'you package' -> your
        version: '50'
    - 
        author: Solen Guitter
        date: '2015-11-30 08:58'
        message: ''
        version: '49'
    - 
        author: Manon Lumeau
        date: '2015-10-14 12:36'
        message: ''
        version: '48'
    - 
        author: Julien Carsique
        date: '2015-10-13 17:02'
        message: ''
        version: '47'
    - 
        author: Julien Carsique
        date: '2015-10-13 16:57'
        message: ''
        version: '46'
    - 
        author: Julien Carsique
        date: '2015-10-13 14:25'
        message: ''
        version: '45'
    - 
        author: Julien Carsique
        date: '2015-09-28 14:26'
        message: ''
        version: '44'
    - 
        author: Julien Carsique
        date: '2015-09-28 14:25'
        message: ''
        version: '43'
    - 
        author: Solen Guitter
        date: '2015-01-30 14:07'
        message: ''
        version: '42'
    - 
        author: Bertrand Chauvin
        date: '2014-11-14 14:59'
        message: ''
        version: '41'
    - 
        author: Bertrand Chauvin
        date: '2014-11-14 14:59'
        message: ''
        version: '40'
    - 
        author: Bertrand Chauvin
        date: '2014-11-14 14:58'
        message: ''
        version: '39'
    - 
        author: Bertrand Chauvin
        date: '2014-11-14 14:56'
        message: ''
        version: '38'
    - 
        author: Bertrand Chauvin
        date: '2014-11-14 14:55'
        message: Added link to NX IDE wizard page
        version: '37'
    - 
        author: Solen Guitter
        date: '2014-09-23 11:13'
        message: ''
        version: '36'
    - 
        author: Manon Lumeau
        date: '2014-09-15 10:48'
        message: ''
        version: '35'
    - 
        author: Julien Carsique
        date: '2014-09-12 15:26'
        message: 'NXDOC-122: use configuration template instead of form'
        version: '34'
    - 
        author: Julien Carsique
        date: '2014-09-12 15:21'
        message: 'NXDOC-380: JIRA macro is broken'
        version: '33'
    - 
        author: Julien Carsique
        date: '2014-09-12 15:14'
        message: ''
        version: '32'
    - 
        author: Julien Carsique
        date: '2014-09-12 15:13'
        message: 'NXDOC-122: ParametrizedCopy'
        version: '31'
    - 
        author: Solen Guitter
        date: '2013-09-20 15:12'
        message: Added TOC
        version: '30'
    - 
        author: Alain Escaffre
        date: '2013-09-17 00:05'
        message: ''
        version: '29'
    - 
        author: Alain Escaffre
        date: '2013-09-17 00:05'
        message: ''
        version: '28'
    - 
        author: Solen Guitter
        date: '2011-11-14 15:28'
        message: Migrated to Confluence 4.0
        version: '27'
    - 
        author: Solen Guitter
        date: '2011-11-14 15:28'
        message: replaced 5.4.3 with 5.5
        version: '26'
    - 
        author: Julien Carsique
        date: '2011-08-16 19:02'
        message: >-
            NXP-6139 - add the templates folder as an env variable to the Update
            Center installer framework
        version: '25'
    - 
        author: whajeri
        date: '2010-11-15 11:18'
        message: ''
        version: '24'
    - 
        author: whajeri
        date: '2010-11-15 11:17'
        message: ''
        version: '23'
    - 
        author: Stéfane Fermigier
        date: '2010-10-06 08:26'
        message: ''
        version: '22'
    - 
        author: Stéfane Fermigier
        date: '2010-10-06 08:24'
        message: ''
        version: '21'
    - 
        author: Eric Barroca
        date: '2010-08-16 17:20'
        message: ''
        version: '20'
    - 
        author: Jane Zupan
        date: '2010-08-12 00:42'
        message: ''
        version: '19'
    - 
        author: Alain Escaffre
        date: '2010-08-10 02:53'
        message: ''
        version: '18'
    - 
        author: Bogdan Stefanescu
        date: '2010-07-07 17:18'
        message: ''
        version: '17'
    - 
        author: Bogdan Stefanescu
        date: '2010-07-07 16:35'
        message: ''
        version: '16'
    - 
        author: Bogdan Stefanescu
        date: '2010-07-07 16:30'
        message: ''
        version: '15'
    - 
        author: Bogdan Stefanescu
        date: '2010-07-07 16:25'
        message: ''
        version: '14'
    - 
        author: Bogdan Stefanescu
        date: '2010-07-07 15:45'
        message: ''
        version: '13'
    - 
        author: Bogdan Stefanescu
        date: '2010-07-07 14:49'
        message: ''
        version: '12'
    - 
        author: Bogdan Stefanescu
        date: '2010-07-07 12:41'
        message: ''
        version: '11'
    - 
        author: Bogdan Stefanescu
        date: '2010-07-07 12:32'
        message: ''
        version: '10'
    - 
        author: Bogdan Stefanescu
        date: '2010-07-07 12:19'
        message: ''
        version: '9'
    - 
        author: Bogdan Stefanescu
        date: '2010-07-07 11:58'
        message: ''
        version: '8'
    - 
        author: Bogdan Stefanescu
        date: '2010-07-07 11:57'
        message: ''
        version: '7'
    - 
        author: Bogdan Stefanescu
        date: '2010-07-07 11:51'
        message: ''
        version: '6'
    - 
        author: Bogdan Stefanescu
        date: '2010-07-07 11:38'
        message: ''
        version: '5'
    - 
        author: Bogdan Stefanescu
        date: '2010-07-07 11:24'
        message: ''
        version: '4'
    - 
        author: Bogdan Stefanescu
        date: '2010-07-07 11:19'
        message: ''
        version: '3'
    - 
        author: Bogdan Stefanescu
        date: '2010-07-07 10:55'
        message: ''
        version: '2'
    - 
        author: Bogdan Stefanescu
        date: '2010-07-07 10:39'
        message: ''
        version: '1'

---
{{! excerpt}}

This section gives instructions on how to wrap a plugin and its required dependencies into a Nuxeo Package.

{{! /excerpt}} {{#> callout type='tip' }}

To ease building your custom Nuxeo Packages, you can check our [Nuxeo Generator](https://www.npmjs.com/package/generator-nuxeo).

{{/callout}}

A&nbsp;Nuxeo Package usually&nbsp;contains new features or patches along with installation instructions and optional constraints towards other packages (dependency, conflict). It is the **easiest** way to distribute a plugin, as it contains in one single ZIP file all the bundles, libraries, configuration properties and templates that are required to make the plugin work. Moreover, it is the most **reliable** and **sustainable** way to install a plugin, as it provides install history, rollback capabilities, dependencies and conflicts resolution and much more.
Nuxeo uses the Nuxeo Package format for distributing all its plugins on [the Nuxeo Marketplace](http://marketplace.nuxeo.com/).&nbsp;Nuxeo Packages are also recommended for delivering your customization.

The Nuxeo Packages can be managed either in the Admin page on the Nuxeo server, or using [the&nbsp;`nuxeoctl` program]({{page page='nuxeoctl-and-control-panel-usage'}}).

Each package contains a description of the modifications that should be done on the server in order to install a plugin. We call "**command**"&nbsp;each atomic instruction of an install or uninstall process. The commands are revertible: for any command execution there is an inverse command that can be executed to rollback the modifications. While installing a package, Nuxeo generates the uninstall instructions (rollback commands) which will be executed either when the installation fails (in the middle of the install process), or when the package is uninstalled.

In this chapter we will discuss about the package format, package execution and rollback.&nbsp;

## Package Format

A package is assembled as a ZIP file that contains the bundles, configuration files or libraries you want to install, along with some special files that describe the install process.

Here is a list of the special files (you should avoid to use these file names for installable resources)

*   **package.xml**&nbsp;- The package descriptor describing package metadata, dependencies and custom handlers to be used when installing.
    See&nbsp;[Package Manifest]({{page page='package-manifest'}})&nbsp;for more details on the file format.
*   **install.xml**&nbsp;- A file containing the install instructions. There are two possible formats for this file: either an XML package command file, or an ant script to be used to install the package. Using ant is discouraged, you should envisage to use the package command to describe an installation rather than ant since rollback is ensured to be safe.&nbsp;
    See&nbsp;[Scripting Commands]({{page page='scripting-commands'}})&nbsp;for more details on the commands file format.
*   **uninstall.xml**&nbsp;- A file containing the uninstall instructions. When using&nbsp;**commands**&nbsp;to describe the install process this file will be automatically generated (so you don't need to write it). When using Ant for the install you must write the uninstall Ant file too.&nbsp;
*   **install.properties**&nbsp;- A Java property file containing user preferences (if any was specified during the install wizard). This file is&nbsp;automatically generated by the installer.
*   **backup**&nbsp;- A directory created by the install process (when using&nbsp;**commands**&nbsp;to describe the install) to backup the existing files that were modified. The content of this directory will be used by the rollback process to revert changes.
    See&nbsp;[Scripting Commands]({{page page='scripting-commands'}})&nbsp;for more details on rollback.
*   **license.txt**&nbsp;- A text file containing the license of the software you want to install. This file is optional.
*   **content.html**&nbsp;- A file containing an HTML description of your package. This file can use references to resources (such as images) located in the package zip - for example you may want to display a set of screenshots for the new feature installed by the package. This file is optional.
*   **forms**&nbsp;- A directory containing custom wizard form definitions. This directory and all the files inside are optional.

    {{#> callout type='warning' }}

    Forms, which are base on the&nbsp;`ParametrizedCopy` command, are more or less deprecated since they currently work only under the following conditions ([NXP-14777](https://jira.nuxeo.com/browse/NXP-14777)):

    *   not under Windows,
    *   MP is hotreloadable ([NXP-8241](https://jira.nuxeo.com/browse/NXP-8241)),
    *   DEV mode is activated.

    Instead, you should use [a custom configuration template]({{page page='configuration-templates'}}) deployed and activated by the MP, then configured by the server administrator from&nbsp;`nuxeo.conf`.

    {{/callout}}

    There are three type of wizard forms you can contribute:

    *   **install.xml**&nbsp;- Describe install forms (i.e. forms added to the install wizard for packages that needs user parameterization)
    *   **uninstall.xml**&nbsp;- Uninstall forms (i.e. forms&nbsp;added to the uninstall wizard for packages that needs user parameterization)
    *   **validation.xml**&nbsp;- Validation forms (i.e. forms used by the install validator if any is needed)

Apart these special files you can put anything inside a package (web resources, jars, Java or Groovy classes etc.). It is recommended to group your additional resources in sub directories to keep a clean structure for your package.

You can see that most of the files listed above are optional or generated. So for a minimal package you will only need 2 files: the&nbsp;**package.xml**&nbsp;and the&nbsp;**install.xml**&nbsp;file.

## The Package Manifest

The package metadata is stored in&nbsp;**package.xml**&nbsp;file.

Here is the list of mandatory and highly recommended properties defining a package:

*   **name:** The package name.
*   **version:** The package version.
*   **title**: The package title to be displayed to the user.
*   **type:** The package type. One of:&nbsp;_studio_,&nbsp;_hotfix_, or&nbsp;_addon_.
*   **platforms:** A list of supported platform versions.
*   **vendor:** The identifier of the package vendor.
*   **home-page:** An URL to the home page of the package (or documentation) if any.
*   **visibility**: The visibility determines the channel where the package will be distributed on (for public, private or registered users).

For more information on the package properties and the XML format see the [Package Manifest]({{page page='package-manifest'}}).

## Scripting Commands

XML Commands are the default way to describe the installation instructions. The advantage of using commands is that the rollback and uninstall scripts will be automatically generated.

See&nbsp;[Scripting Commands]({{page page='scripting-commands'}})&nbsp;for more details on using commands.

Below is the list of available properties you can use in command files to parameterize your commands.

## Using Ant for the&nbsp;Scripting Commands (deprecated)

When using Ant you must write two scripts: the `install.xml` and `uninstall.xml` files.
Each of these scripts must have at least two targets.
The **default** target of the `install.xml` script will be used to execute the installation. The other required target of the script is a target named **rollback** which will be called to do the rollback if anything went wrong during the installation (i.e. during the execution of the **default** target). The same rule applies for the `uninstall.xml` script.

See below the list of useful properties that will be injected in the Ant context and thus are available in the scripts.

{{#> callout type='note' }}

Using Ant is not recommended since a safe rollback is difficult to handle.

{{/callout}}

## Context Properties Available in Scripting Commands

Here is the list of properties available to install scripts:

*   all the system properties in the running JVM.
*   **package.id:**&nbsp;The Package identifier.
*   **package.name:**&nbsp;The Package name.
*   **package.version:**&nbsp;The Package version.
*   **package.root:**&nbsp;The root folder of the package (the folder containing the exploded zip).
*   **env.server.home:**&nbsp;Since 5.5\. The Nuxeo server home. (`$NUXEO_HOME`).
*   **env.home:**&nbsp;The Nuxeo Runtime Environment home. (`$NUXEO_HOME/server/default/data/NXRuntime` on JBoss, `$NUXEO_HOME/nxserver on Tomcat`).
*   **env.ear:**&nbsp;JBoss only. The nuxeo.ear directory (`$NUXEO_HOME/server/default/deploy/nuxeo.ear`).
*   **env.lib:**&nbsp;The Nuxeo lib directory ( [`nuxeo.ear/lib`](http://nuxeo.ear/lib) on JBoss, `$NUXEO_HOME/nxserver/lib` on Tomcat).
*   **env.syslib:**&nbsp;The host application lib directory (`$NUXEO_HOME/lib`).
*   **env.bundles:**&nbsp;The Nuxeo bundles directory ( [`nuxeo.ear/bundles`](http://nuxeo.ear/bundles) on JBoss, `$NUXEO_HOME/nxserver/bundles` on Tomcat).
*   **env.config:**&nbsp;The Nuxeo&nbsp;_config_ `&nbsp;directory ([nuxeo.ear/config](http://nuxeo.ear/config)` on JBoss, `$NUXEO_HOME/nxserver/config` on Tomcat).
*   **env.templates:** The configuration templates directory. (`$NUXEO_HOME/templates`).
*   **env.hostapp.name:**&nbsp;The host application name (Tomcat or JBoss)
*   **env.hostapp.version:**&nbsp;The host application version (e.g. Tomcat or JBoss version)
*   **sys.timestamp:**&nbsp;The timestamp when the install task was created - a string in the format `yyMMddHHmmss`.

&nbsp;